import r from"@babel/runtime/helpers/defineProperty";import t from"corva-convert-units";import{sortBy as n,uniqBy as e}from"lodash";import{UNIT_DEFINITIONS as o,IMPERIAL_UNITS as i,METRIC_UNITS as u}from"./constants/units.js";function c(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.push.apply(n,e)}return n}function f(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?c(Object(e),!0).forEach((function(n){r(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}var l="custom",a="imperial",s={imperial:i,metric:u,custom:{}},p=a,v=[],m=function(){return o},b=function(){return s[p]};var g=function(r){var t,n=r.userUnits,e=r.companyUnits;n||e?(s.custom=f(f(f({},i),e),n),p=l):(s.custom={},p=a),t=s.custom,v.forEach((function(r){return r(t)}))};function d(){return s.custom}function h(r){return v.push(r),function(){v=v.filter((function(t){return t!==r}))}}var y=function(r){return s[p][r]},O=function(r){var e=o.find((function(t){return t.type===r}));return e?n(t().list(e.origin),"abbr"):[]},j=function(r){var t=O(r);return e(t,"abbr")},P=function(){return p},w=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=t(),o=e.getUnit,i=e.describe;return null===n&&(n=s.custom[r]),o(n)?i(n).display:n},D=function(r){return s.imperial[r]},E=function(r,n,e){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;if(!r||!e||e===o)return r;if(null===o&&(!(o=y(n))||e===o))return r;var u=t(r).from(e).to(o);return Number.isFinite(u)?Math.round(u*Math.pow(10,i))/Math.pow(10,i):u},M=function(r,t,n,e){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return r.map((function(r){var u=E(r.get(t),n,e,o,i);return r.set(t,u)}))},U=function(r,t){return r.map((function(r){return t.reduce((function(r,t){var n=t.key,e=t.unitType,o=t.from,i=t.to,u=t.precision,c=r.get(n),f=E(c,e,o,i,u);return r.set(n,f)}),r)}))},k=function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,e=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,u=0;u<r.length;u+=1)r[u][t]=E(r[u][t],n,e,o,i);return r},S=function(r){return t().describe(y(r)).singular},x=function(r){return t().describe(y(r)).plural},F=function(r){return t().describe(r)};export{k as convertArray,M as convertImmutables,U as convertImmutablesByBatch,E as convertValue,m as getAllUnitTypes,D as getDefaultImperialUnit,b as getDefaultUnits,j as getUniqueUnitsByType,F as getUnitDescription,w as getUnitDisplay,x as getUnitPlural,y as getUnitPreference,S as getUnitSingular,P as getUnitSystem,O as getUnitsByType,d as getUserUnits,h as subscribeForUserUnitsUpdates,g as updateUserUnits};

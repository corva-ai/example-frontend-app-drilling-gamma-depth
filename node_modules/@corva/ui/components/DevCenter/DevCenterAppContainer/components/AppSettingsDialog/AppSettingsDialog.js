import t from"@babel/runtime/helpers/defineProperty";import"@babel/runtime/helpers/toConsumableArray";import"../../../../../constants/completion.js";import"../../../../../constants/alerts.js";import{cloneDeep as e,get as i,noop as r}from"lodash";import o from"@babel/runtime/helpers/slicedToArray";import{DEV_CENTER_CLI_APP_ID as n}from"../../../../../constants/devcenter.js";import"../../../../../constants/goals.js";import{SEGMENT_TO_ASSET_TYPE as s,SEGMENTS as p}from"../../../../../constants/segment.js";import"../../../../../constants/apps.js";import"../../../../../constants/drillstring.js";import"../../../../../constants/notifications.js";import"@babel/runtime/regenerator";import"@babel/runtime/helpers/asyncToGenerator";import"../../../../../utils/mobileDetect.js";import"@babel/runtime/helpers/typeof";import"../../../../../utils/index.js";import{jsxs as a,jsx as m,Fragment as l}from"react/jsx-runtime";import{withStyles as d,Dialog as c,Tabs as u,DialogTitle as j,Divider as g,DialogContent as A,Tab as C,DialogActions as f}from"@material-ui/core";import{useState as S}from"react";import"querystring";import"uuid/v1";import"../../../../../clients/jsonApi/index.js";import"../../../../../clients/subscriptions.js";import"uuid";import"@babel/runtime/helpers/objectWithoutProperties";import{func as b,shape as h,string as v,bool as P}from"prop-types";import"classnames";import"../../../../Modal/index.js";import"../../../../IconMenu/index.js";import"../../../../StyledMenuItem/index.js";import"../../../../LoadingIndicator/LoadingIndicator.js";import"../AppActions/AppActions.css.js";import"../../../../EmptyView/EmptyAppView/EmptyAppView.js";import y from"../../../../ErrorBoundary/ErrorBoundary.js";import"../../../../Typography.js";import x from"../../../../ErrorBoundary/DevCenterAppErrorView/DevCenterAppErrorView.js";import D from"../../../../ConfirmationDialog.js";import E from"../DisabledSettingsMessage/DisabledSettingsMessage.js";import T from"./RemoveAppButton.js";import"slate";import"../../../../SlateFormattedText/RenderElements.js";import"../../../../SlateFormattedText/SlateFormattedText.js";import k from"./AppDetails.js";import I from"./AppSettingsDialog.module.css.js";import"../AnnotationsButton/AnnotationsButton.js";import"../NonPriorityMenus/NonPriorityMenus.js";import"../FullscreenButton/FullscreenButton.js";import"../AppInfoMessage/AppInfoMessage.js";import"../../../../EmptyView/EmptyAppView/components/ErrorSubtitleWithIntercomLink.js";import"../HelpCenterDialog/HelpCenterDialog.js";import"../DcTooltipsCoordinatorProvider/DcTooltipsCoordinatorProvider.js";import"../IsInsideDcAppProvider/IsInsideDcAppProvider.js";import"../../../../Tooltip/MuiTooltipDcWrapper.js";import"../../../../Avatar/index.js";import"../../../../Annotations/AnnotationsContext.js";import"../../../DevCenterRouterContext/DevCenterRouterContext.js";import"react-router";import{useDevCenterRouter as L}from"../../../DevCenterRouterContext/effects/useDevCenterRouter.js";import"../../../DevCenterRouterContext/UniversalLink/UniversalLink.js";import"../../../../Annotations/components/AnnotationsList/index.js";import"../../../../Annotations/components/LastAnnotation/index.js";import"../../../../PadModeSelect/PadModeSelect.js";import"../../../AppHeader/AppHeader.js";import"../../../AppSideBar/AppSideBar.js";import"../../../AppContext.js";import"../../../AppsDataProvider/AppsDataProvider.js";import"@material-ui/icons/Help";import"../../DevCenterAppContainer.css.js";import"../RestoreAppSizeButton/index.js";import"../PriorityMenus/PriorityMenus.css.js";import"../../../NavigationBar/NavigationBar.js";import"../../../SideBar/SideBar.js";import"../../../AppSettingsPopover/AppSettingsPopover.js";import"../../../../TruncatedText/index.js";import"../../../../AssetEditor/SingleAssetEditor.js";import"../../../../AssetEditor/AssetEditorAutocomplete.js";import O from"../../../../AssetEditor/index.js";import B from"../../../../AppVersionsSelect/AppVersionsSelect.js";import"../../../../CollapsableSidebar.js";import"../../../../DateTimePicker/index.js";import"../../../../DatePicker/index.js";import"../../../../ColorPicker/PaletteChromePicker/PaletteChromePicker.js";import"../../../../ColorPicker/ColorPicker.js";import"../../../../ParameterCharts/AddEditTrack.js";import"../../../../ParameterCharts/ParameterCharts.js";import"../../../../ChartActionsList/ChartActionsList.js";import"../../../../SettingEditors/ColorEditor/index.js";import"../../../../SettingEditors/DropdownEditor/index.js";import"../../../../SettingEditors/RadioEditor/index.js";import"../../../../SwitchControl/index.js";import"../../../../RangeSlider/RangeSlider.js";import"../../../../Login/components/Login.js";import"../../../../Login/components/PasswordField.js";import"../../../../Login/components/Chip.js";import"../../../../Login/components/StepFooter.js";import"../../../../Login/components/StepContent.js";import"../../../../Login/components/StepHeader.js";import"../../../../Login/components/Step.js";import"../../../../Login/components/OrDivider.js";import"../../../../Login/components/HiddenEmailField.js";import"../../../../Login/components/EmailField.js";import"../../../../Breadcrumbs/index.js";import"../../../../VirtualizedTable/index.js";import"../../../../EmptyView/EmptyView.js";import R from"../../../../Button/index.js";import"../../../../MenuItem/index.js";import"../../../../ContextMenuItem/index.js";import"../../../../FolderMenuItem/index.js";import"../../../../EditableItem/EditableItem/index.js";import"../../../../EditableItem/EditableItemWithBadge/index.js";import"../../../../Checkbox/index.js";import"../../../../FolderMenuItemWithLinks/index.js";import"../../../../IconButton/index.js";import"../../../../TextField/index.js";import"../../../../Chip/index.js";import"../../../../Counter/index.js";import"../../../../AnchorsList/AnchorsList.js";import"../../../../Select/index.js";import"../../../../Tabs/Tabs.js";import"../../../../Tabs/Tab.js";import"../../../../Drillstring/BHASchematic.js";import"../../../../Drillstring/BHAComponentIcon.js";import"../../../../Drillstring/BHATable/index.js";import"../../../../Drillstring/BHAComponentDetail/index.js";import"../../../../Casing/CasingComponentIcon.js";import"../../../../Casing/CasingTable/index.js";import"../../../../WellSummary/WellSummaryItemLabel.js";import"../../../../WellSummary/WellSummaryItemTitle.js";import"../../../../WellSummary/WellSummaryItemValue.js";import"../../../../WellSummary/ActivitySummaryChart.js";import"../../../../WellSummary/FracWirelineTimeChart.js";import"../../../../BICOffsetPickerDialog/index.js";import"../../../../OffsetWellPickerV2/OffsetWellPickerDialog.js";import"../../../../Notifications/Notifications.js";import"../../../../TextLink/index.js";import"../../../../Template/TemplatePopover/index.js";import"../../../../PinnableFilters/PinnableFilters.js";import"../../../../HeaderLayout/HeaderLayout.js";import"../../../../PadOffsetsPicker/PadOffsetsPicker.js";import"../../../../PadOffsetsPicker/OffsetAssetChip.js";import"../../../../PadOffsetsPicker/OffsetAssetsListExpander.js";import"../../../../PadOffsetsPicker/StagesSelector.js";import"../../../../Table/TableToolbar/TableToolbar.js";import"../../../../PriceInput/PriceInput.js";import"../../../../LabelsCounter/LabelsCounter.js";import"../../../../Stepper/Step.js";import"../../../../Stepper/StepsWrapper.js";import"../../../../Stepper/Stepper.js";import"../../../../Comment/CommentIcon/index.js";import"../../../../FilesLoader/FilesLoader.js";import"../../../../SearchInput/index.js";function w(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function M(e){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?w(Object(r),!0).forEach((function(i){t(e,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F="DC_appSettings",W=d({paper:{minWidth:"50rem",height:"40rem"}})(c),V=d({root:{marginBottom:10}})(u),H="SETTINGS",N="APP DETAILS";function q(r){var d=r.AppSettingsComponent,c=r.app,u=r.appData,b=r.appName,h=r.currentUser,v=r.isAssetSubscriptionFeatureActive,P=r.isMultiRig,w=r.isSettingsDialogHidden,q=r.layoutEnvironment,_=r.onAppRemove,U=r.onCloneDashboard,G=r.onSettingsChange,z=r.segment,K=r.toggleAppSettingsDialog,Y=S(H),J=o(Y,2),Q=J[0],X=J[1],Z=S((function(){var t;return M(M({},e(c.settings)),{},{package:c.settings.package||(null==c||null===(t=c.package)||void 0===t?void 0:t.version)})})),$=o(Z,2),tt=$[0],et=$[1],it=S(!0),rt=o(it,2),ot=rt[0],nt=rt[1],st=L(),pt=c.id===n,at=function(e,i){return et((function(r){return M(M({},r),{},t({},e,i))}))},mt=function(t){return et((function(e){return M(M({},e),t)}))},lt=q&&"asset"===q.type,dt=!(P||lt&&z===p.COMPLETION);return a(W,{open:!0,onBackdropClick:K,children:[a(j,{children:[b," settings"]}),m(g,{}),a(A,{children:[a(V,{value:Q,onChange:function(t,e){return X(e)},indicatorColor:"primary",textColor:"primary",children:[m(C,{"data-testid":"".concat(F,"_settingsTab"),label:H,value:H}),m(C,{"data-testid":"".concat(F,"_appDetailsTab"),label:N,value:N}),m(R,{"data-testid":"".concat(F,"_viewAppPageTab"),className:I.viewAppButton,onClick:function(){var t,e;return st.push((e=null==c||null===(t=c.app)||void 0===t?void 0:t.id,"/apps/".concat(e)))},children:"VIEW APP PAGE"})]}),a(y,{ErrorView:x,app:c,children:[m(D,{open:!ot&&!tt.package,isShowCancel:!1,title:"Validation failed",text:"You should select the app version to proceed",handleOk:function(){return nt(!0)}}),Q===H&&a(l,{children:[w&&m(E,{onCloneDashboard:U}),!w&&dt&&m(O,{appKey:v&&!pt?c.app.app_key:null,settings:tt,onSettingsChange:mt,appType:s[z],isNullable:lt,label:"Active Asset"}),!w&&d&&m(d,{app:c,appData:u,settings:tt,onSettingChange:at,onSettingsChange:mt,layoutEnvironment:q,currentUser:h}),!w&&!pt&&m(B,{appId:c.app.id,value:tt.package,onChange:function(t){return at("package",t)},currentUser:h})]}),Q===N&&m(k,{appDescription:i(c,"app.description"),appSummary:i(c,"app.summary")})]})]}),a(f,{children:[_&&m(T,{appName:b,onAppRemove:_}),m(R,{"data-testid":"".concat(F,"_cancel"),variation:"secondary",onClick:K,children:"Cancel"}),m(R,{"data-testid":"".concat(F,"_save"),variation:"primary",onClick:function(){tt.package||pt?(G(tt),K()):nt(!1)},children:"Save"})]})]})}q.propTypes={AppSettingsComponent:b,app:h({}).isRequired,appData:h({}).isRequired,appName:v.isRequired,currentUser:h({}).isRequired,isMultiRig:P.isRequired,isAssetSubscriptionFeatureActive:P,layoutEnvironment:h({}).isRequired,onAppRemove:b,onSettingsChange:b.isRequired,segment:v.isRequired,toggleAppSettingsDialog:b.isRequired,isSettingsDialogHidden:P,onCloneDashboard:b},q.defaultProps={AppSettingsComponent:null,isAssetSubscriptionFeatureActive:!1,onAppRemove:void 0,isSettingsDialogHidden:!1,onCloneDashboard:r};export default q;

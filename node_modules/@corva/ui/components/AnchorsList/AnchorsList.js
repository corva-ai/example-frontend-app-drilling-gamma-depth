import e from"@babel/runtime/helpers/defineProperty";import{throttle as t,noop as r}from"lodash";import n from"@babel/runtime/helpers/slicedToArray";import{jsx as o,jsxs as i,Fragment as c}from"react/jsx-runtime";import{makeStyles as l,Typography as a,Link as s}from"@material-ui/core";import{useRef as p,useEffect as u,useState as m,useCallback as f,useMemo as d}from"react";import h from"prop-types";import g from"classnames";function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?b(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v=l((function(t){return{root:e({top:70,width:175,flexShrink:0,position:"sticky",height:"calc(100vh - 70px)",overflowY:"auto",padding:t.spacing(2,0),display:"none"},t.breakpoints.up("sm"),{display:"block"}),title:{color:t.palette.primary.text8,margin:"0 0 8px 16px",lineHeight:"24px",fontSize:10,fontWeight:500,letterSpacing:1},contents:{marginTop:t.spacing(2),paddingLeft:t.spacing(1)},ul:{padding:0,margin:0,listStyle:"none",borderLeft:"1px solid ".concat(t.palette.background.b9)},li:{display:"flex","&:not(:first-of-type)":{marginTop:8}},item:{color:t.palette.primary.text6,display:"inline-block",margin:"7px 16px",fontSize:12,fontWeight:400,letter:"0.4px",lineHeight:"16px"},active:{color:t.palette.text.primary,fontWeight:500},activeItemBorder:{height:30,width:"2px",backgroundColor:"#03BCD4",borderRadius:"0 2px 2px 0",position:"absolute"}}}));function x(e){var l=e.title,h=e.items,b=v(),x=p([]);u((function(){x.current=h.map((function(e){return y(y({},e),{},{node:document.getElementById(e.hash)})}))}),[h]);var O,w,k,j=m(null),P=n(j,2),T=P[0],E=P[1],S=p(!1),N=p(null),I=f((function(){if(!S.current){for(var e,t=x.current.length-1;t>=0;t-=1){if(document.documentElement.scrollTop<100){e={hash:null};break}var r=x.current[t];if(r.node&&r.node.offsetTop<document.documentElement.scrollTop+document.documentElement.clientHeight/8){e=r;break}}e&&T!==e.hash&&E(e.hash)}}),[T]);O=h.length>0?I:null,k=d((function(){return O?t(O,w):r}),[O,w=166]),u((function(){if(k!==r)return window.addEventListener("scroll",k),function(){window.removeEventListener("scroll",k),k.cancel()}}),[k]);return u((function(){return function(){clearTimeout(N.current)}}),[]),u((function(){var e=window.location.hash;if(e){var t=document.getElementById(e.substr(1));t&&setTimeout((function(){t.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}),50)}}),[]),o("nav",{className:b.root,children:h.length>0&&i(c,{children:[o("div",{className:b.title,children:l}),o(a,{component:"ul",className:b.ul,children:h.map((function(e){var t,r=T===e.hash;return i("li",{className:b.li,children:[r&&o("div",{className:b.activeItemBorder}),o(s,{display:"block",href:"#".concat(e.hash),underline:"none",onClick:(t=e.hash,function(e){e.defaultPrevented||0!==e.button||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey||(S.current=!0,N.current=setTimeout((function(){S.current=!1}),1e3),T!==t&&E(t))}),className:g(b.item,r&&b.active),children:o("span",{children:e.text})})]},e.text)}))})]})})}x.defaultProps={title:"ON THIS PAGE",items:[]},x.propTypes={title:h.string,items:h.arrayOf(h.shape({hash:h.string,text:h.string}))};export default x;

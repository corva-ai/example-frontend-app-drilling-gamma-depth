import n from"@babel/runtime/helpers/defineProperty";import t from"@babel/runtime/helpers/toConsumableArray";import r from"@babel/runtime/helpers/slicedToArray";import{jsx as e}from"react/jsx-runtime";import{createContext as o,useReducer as a,useContext as i}from"react";import{node as c}from"prop-types";import{EDIT_ANNOTATION as d,DELETE_ANNOTATION as u,ADD_ANNOTATION as s,APPEND_ANNOTATIONS as p,SET_ANNOTATIONS as f}from"./constants.js";function l(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.push.apply(r,e)}return r}function m(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?l(Object(e),!0).forEach((function(r){n(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var y=o(),b=o();function v(n,r){switch(r.type){case f:return{annotations:r.annotations};case p:return m(m({},n),{},{annotations:{data:[].concat(t(n.annotations.data),t(r.annotations.data)),included:r.annotations.included.reduce((function(n,t){return n.find((function(n){var r=n.id,e=n.type;return r===t.id&&e===t.type}))?n:n.concat([t])}),n.annotations.included)}});case s:return m(m({},n),{},{annotations:n.annotations.data?{data:[r.annotation.data].concat(t(n.annotations.data)),included:r.annotation.included.reduce((function(n,t){return n.find((function(n){var r=n.id,e=n.type;return r===t.id&&e===t.type}))?n:n.concat([t])}),n.annotations.included)}:{data:[r.annotation.data],included:r.annotation.included}});case u:var e=n.annotations.data;return m(m({},n),{},{annotations:m(m({},n.annotations),{},{data:e.filter((function(n){return n.id!==r.id}))})});case d:return m(m({},n),{},{annotations:m(m({},n.annotations),{},{data:n.annotations.data.map((function(n){return n.id===r.id?r.annotation.data:n})),included:r.annotation.included.reduce((function(n,t){return n.find((function(n){var r=n.id,e=n.type;return r===t.id&&e===t.type}))?n:n.concat([t])}),n.annotations.included)})});default:throw new Error("Unhandled action type: ".concat(r.type))}}function h(n){var t=n.children,o=a(v,{annotations:[]}),i=r(o,2),c=i[0],d=i[1];return e(y.Provider,{value:c,children:e(b.Provider,{value:d,children:t})})}function O(){var n=i(y);if(void 0===n)throw new Error("useAnnotationsState must be used within a AnnotationsProvider");return n}function w(){var n=i(b);if(void 0===n)throw new Error("useAnnotationsDispatch must be used within a AnnotationsProvider");return n}h.propTypes={children:c.isRequired};export{h as AnnotationsProvider,w as useAnnotationsDispatch,O as useAnnotationsState};

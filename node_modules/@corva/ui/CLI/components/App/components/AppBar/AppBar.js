import e from"@babel/runtime/helpers/slicedToArray";import{jsxs as r,jsx as t}from"react/jsx-runtime";import{makeStyles as o,useTheme as a,AppBar as n,Toolbar as i,FormControlLabel as l,Checkbox as c,Tooltip as s,IconButton as p,Typography as m,Menu as d,MenuItem as u}from"@material-ui/core";import{useState as h}from"react";import f from"prop-types";import g from"../../../../../components/SwitchControl/index.js";import{LOCAL_STORAGE_PDF_REPORT_VIEW_KEY as b}from"../../../../hocs/constants.js";import{isPDFReportView as C}from"../../../../hocs/utils.js";import{useAuth as v}from"../../../../context/auth.js";import B from"@material-ui/icons/AccountCircle";import w from"../../../../assets/DevCenterLogo.js";var k=o((function(e){return{grow:{flexGrow:1},flex:{display:"flex"},appBar:{backgroundColor:"rgb(30, 31, 31)"},iconButtonRoot:{borderRadius:"unset"},userProfileIcon:{marginLeft:4},headerControl:{marginRight:32},formControlLabel:{fontSize:14}}}));function x(o){var f=o.toggleTheme,x=k(),A=v(),L=A.user,T=A.logout,N=a(),_=h(null),j=e(_,2),R=j[0],S=j[1],y=Boolean(R),z=function(){return S(null)},D=L.first_name,I=L.last_name,O="".concat(D[0]).concat(I[0]).toUpperCase();return r("div",{children:[t(n,{position:"static",className:x.appBar,children:r(i,{children:[t(w,{}),t("div",{className:x.grow}),t(l,{control:t(c,{"data-testid":"".concat("AppBar","_pdfReport"),checked:C,size:"small",onChange:function(e){localStorage.setItem(b,e.target.checked),window.location.reload()}}),label:"PDF report view",classes:{label:x.formControlLabel},className:x.headerControl}),!C&&t(s,{title:"Switch to light theme to tune your app for PDF reports",placement:"bottom",children:t("div",{children:t(g,{"data-testid":"".concat("AppBar","_themeSwitch"),className:x.headerControl,leftLabel:"Dark Theme",rightLabel:"Light Theme",onChange:f,checked:N.isLightTheme,size:"small",title:""})})}),t("div",{children:t(p,{edge:"end","aria-label":"account of current user","aria-controls":"app-bar-menu","aria-haspopup":"true",onClick:function(e){return S(e.currentTarget)},color:"inherit",className:x.iconButtonRoot,children:r("div",{className:x.flex,children:[t(m,{"data-testid":"".concat("AppBar","_userInitials"),children:O}),t(B,{className:x.userProfileIcon})]})})})]})}),t(d,{"data-testid":"".concat("AppBar","_userDropdown"),anchorEl:R,id:"app-bar-menu",keepMounted:!0,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:y,onClose:z,children:t(u,{"data-testid":"".concat("AppBar","_signOutMenuItem"),onClick:function(){T(),z()},children:"Sign Out"})})]})}x.propTypes={toggleTheme:f.func.isRequired};export default x;

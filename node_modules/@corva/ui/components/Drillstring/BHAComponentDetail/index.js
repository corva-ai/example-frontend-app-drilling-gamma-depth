import{get as e,map as n,includes as i}from"lodash";import{getUnitDisplay as t}from"../../../utils/index.js";import{jsxs as l,jsx as r}from"react/jsx-runtime";import{makeStyles as o,Button as a,Grid as c}from"@material-ui/core";import{memo as d}from"react";import m from"prop-types";import{BHA_COMPONENT_TYPES as s,BHA_GENERAL_FIELD_TYPES as u,BHA_TABLE_FIELD_TYPES as f,UR_ACTIVATION_LOGIC_TYPES as h,BHA_ALTERNATIVE_FIELD_TYPES as p,BHA_STABILIZER_FIELD_TYPES as b,FLOW_RATE_UNIT as _,UR_ACTIVATION_LOGIC_KEYS as g}from"./constants.js";var x=o({header:{marginBottom:"10px",borderBottom:"1px solid #888"},title:{fontWeight:"bold",fontSize:"2rem",marginTop:"0px"},done_button:{float:"right"},field_label:{color:"#ccc",fontSize:"0.8rem"},field_value:{fontSize:"1.2rem",lineHeight:"2rem",fontWeight:"bold"},thead:{borderBottom:"0px"},th:{color:"#ccc",fontSize:"0.8rem",padding:"0px"},td:{fontSize:"1.2rem",padding:"0px"},col:{padding:"0 0.75rem"},row:{marginBottom:"20px"},sub_title:{fontWeight:"bold",fontSize:"1.5rem",marginTop:"10px",padding:"0 0.75rem"}});function z(o){var d=o.component,m=o.onDone,z=o.currentUser,v=x(),N=d&&e(d,"family"),y=z?e(z,["preference","segment"],[]):[],T=z&&e(z,"current_segment"),S=-1===y.indexOf(T)?y[0]:T,A=s.filter((function(e){return e.family===N})),B=A&&A[0],D=B&&B.data,F=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=arguments.length>3?arguments[3]:void 0,m=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=e(d,n)||"",u=m?_[S].unitType:a,f=u?"(".concat(t(u),")"):"";return l(c,{item:!0,md:o,xs:12,className:v.col,children:[r("span",{className:v.field_label,children:"".concat(i," ").concat(f)}),r("br",{}),r("span",{className:v.field_value,children:s.fixFloat?s.fixFloat(3):s||"n/a"})]},i)},j=function(t,l){return l?n(u,(function(n){return i(l,n.name)&&(!n.cond||n.cond&&e(d,n.cond,!1))&&(!n.family||n.family===N)&&(n.unit?F([n.name],n.label,n.col_size||t,n.unit):F([n.name],n.label,n.col_size||t))})):null},k=function(e){return e?r(c,{item:!0,xs:12,className:v.sub_title,children:e},"subTitle"):null},q=function(i,t,o){return r(c,{item:!0,xs:12,className:v.col,children:e(d,i,[]).length>0&&l("table",{children:[r("thead",{className:v.thead,children:r("tr",{children:n(t,(function(e,n){return r("th",{className:v.th,children:e},n)}))})}),r("tbody",{children:n(e(d,i,[]),(function(i,t){return r("tr",{children:n(o,(function(n,t){return r("td",{className:v.td,children:n.isNumber?e(i,n.field)&&e(i,n.field).fixFloat(3):e(i,n.field)},t)}))},t)}))})]})},"tbField")},C=function(t,o,a,m,s){return o?l(c,{container:!0,children:[a&&n(f,(function(n){return i(a,n.name)&&(!n.cond||n.cond&&e(d,n.cond,!1))&&(n.unit||n.unit_from_segment?F([n.name],n.label,n.col_size||t,n.unit,n.unit_from_segment):F([n.name],n.label,n.col_size||t))})),l(c,{item:!0,md:4,xs:12,className:v.col,children:[r("span",{className:v.field_label,children:"Activation Logic"}),r("br",{}),r("span",{className:v.field_value,children:(u=m,(h.find((function(e){return e.type===u}))||{}).name||"n/a")})]}),s&&i(a,"ur_opened_depth")&&F(["ur_opened_depth"],"Activation Depth",t,"length")]},o):null;var u},R=function(t,l){return l?n(p,(function(n){return i(l,n.name)&&(!n.cond||n.cond&&e(d,n.cond,!1))&&(!n.family||n.family===N)&&(n.unit?F([n.name],n.label,n.col_size||t,n.unit):F([n.name],n.label,n.col_size||t))})):null},W=function(t,l){return l&&e(d,"has_stabilizer")?n(b,(function(n){return i(l,n.name)&&(!n.cond||n.cond&&e(d,n.cond,!1))&&(!n.family||n.family===N)&&(n.unit?F(["stabilizer",n.name],n.label,n.col_size||t,n.unit):F(["stabilizer",n.name],n.label,n.col_size||t))})):null};return l("div",{children:[l("header",{className:v.header,children:[r(a,{variant:"contained",className:v.done_button,onClick:m,children:"Close"}),l("h4",{className:v.title,children:[e(d,"name")," ( ",e(d,"family")," )"]})]}),r(c,{container:!0,children:r(c,{item:!0,xs:12,className:v.col,children:n(D,(function(n){return function(n){var i=n&&+e(n,"col_size"),t=n&&e(n,"fields"),r=n&&e(n,"stablizer_fields"),o=n&&e(n,"sub_title"),a=n&&e(n,"sub_key"),m=n&&e(n,"sub_fields"),s=n&&e(n,"tb_field"),u=n&&e(n,"tb_head"),f=n&&e(n,"tb_body"),h=e(d,"activation_logic"),p=h===g.DEPTH_ACTIVATION;return l(c,{container:!0,className:v.row,children:[j(i,t),k(o),q(s,u,f),C(i,a,m,h,p),R(i,t),W(i,r)]},n.key)}(n)}))})})]})}z.propTypes={component:m.shape({}).isRequired,onDone:m.func.isRequired,currentUser:m.shape({}).isRequired};var v=d(z);export default v;

import React from 'react';
import ReactDOM from 'react-dom';
import withCorvaMagicHOC from '../../../CLI/hocs/withCorvaMagicHOC';

Promise.all([
  import(/* webpackMode: "lazy" */ `${process.env.DEV_CENTER_APP_PATH}/src/index.js`),
  import(/* webpackMode: "lazy" */ `${process.env.DEV_CENTER_APP_PATH}/manifest.json`),
  import(/* webpackMode: "lazy" */ `${process.env.DEV_CENTER_APP_PATH}/package.json`),
]).then(([index, manifest, packageJson]) => {
  const AppComponent = withCorvaMagicHOC({
    component: index.default.component,
    settings: index.default.settings,
    manifest: manifest.default,
    packageJson: packageJson.default,
  });
  ReactDOM.render(React.createElement(AppComponent, null), document.getElementById('root'));
});

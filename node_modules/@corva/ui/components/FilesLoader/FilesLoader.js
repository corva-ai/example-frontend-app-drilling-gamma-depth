import e from"@babel/runtime/helpers/defineProperty";import r from"@babel/runtime/helpers/slicedToArray";import{jsxs as o,jsx as n}from"react/jsx-runtime";import{Typography as t,LinearProgress as a,Tooltip as i,IconButton as c}from"@material-ui/core";import{useState as l,useEffect as s}from"react";import d from"prop-types";import{Delete as m}from"@material-ui/icons";import p from"./Icons/IconWarning.js";import f from"./Icons/IconCancel.js";import u from"./Icons/IconSuccess.js";import{useStyles as h}from"./useStyles.js";import v from"./Icons/FileIcon.js";function y(e,r){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),o.push.apply(o,n)}return o}function b(r){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?y(Object(n),!0).forEach((function(o){e(r,o,n[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}))}return r}function j(e){var d=h(),y=l({}),j=r(y,2),w=j[0],O=j[1],g=l(0),N=r(g,2),P=N[0],S=N[1],z=e.name,B=e.sizeBytes,I=e.handleCancel,M=e.onDelete,C=e.loadedBytes,D=e.error;return s((function(){B&&O(B>=Math.pow(10,6)?{downloaded:0,unit:"MB",convertedSize:Math.floor(B/Math.pow(10,5))/10}:B>=Math.pow(10,3)?{downloaded:0,unit:"KB",convertedSize:Math.floor(B/Math.pow(10,2))/10}:{downloaded:0,unit:"B",convertedSize:Math.floor(10*B)/10})}),[B]),s((function(){if(C){var e=Math.round(C/B*100);O((function(r){return b(b({},r),{},{downloaded:Math.floor(r.convertedSize*e/10)/10})})),S(e)}}),[C]),o("div",{className:d.fileStateWrapper,children:[n("div",{className:d.fileIconContainer,children:n(v,{name:z})}),o("div",{className:d.fileState,children:[o("div",{className:d.fileStateProgress,children:[n("div",{className:d.fileNameWrapper,children:n(t,{className:d.fileName,children:z})}),n(a,{className:d.progressBar,variant:"determinate",value:P,classes:{colorPrimary:d.progressBackground}}),o("div",{className:d.loaderProgressContainer,children:[n(t,{className:d.fileSize,component:"span",children:"".concat(w.downloaded," of ").concat(w.convertedSize," ").concat(w.unit)}),n("div",{className:d.progressStatus,children:D?n(i,{title:"There was a server error during the upload request. Please try later.",children:o(t,{component:"div",className:d.errorContainer,children:[n(t,{component:"span",className:d.errorText,children:"Upload Error"}),n(p,{})]})}):"".concat(P," %")})]})]}),o("div",{className:d.fileActions,children:[P<100&&!D&&n(c,{size:"small",onClick:function(){I(z),S(0),O((function(e){return b(b({},e),{},{downloaded:0})}))},children:n(f,{})}),100===P&&!D&&(M?n(c,{size:"small",onClick:M,children:n(m,{className:d.deleteIcon})}):n(u,{}))]})]})]})}j.propTypes={onDelete:d.func,handleCancel:d.func,name:d.string,sizeBytes:d.number,error:d.bool,loadedBytes:d.number.isRequired},j.defaultProps={onDelete:null,name:"",sizeBytes:1,error:null,handleCancel:null};export default j;

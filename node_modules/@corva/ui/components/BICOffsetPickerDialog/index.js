import e from"@babel/runtime/helpers/defineProperty";import t from"@babel/runtime/helpers/toConsumableArray";import"../../constants/completion.js";import"../../constants/alerts.js";import{get as r,uniq as n,includes as i,isEqual as o}from"lodash";import s from"@babel/runtime/helpers/slicedToArray";import"../../constants/goals.js";import"../../constants/segment.js";import"../../constants/apps.js";import"../../constants/drillstring.js";import"../../constants/notifications.js";import"@babel/runtime/regenerator";import"@babel/runtime/helpers/asyncToGenerator";import"../../utils/mobileDetect.js";import l from"@babel/runtime/helpers/typeof";import"../../utils/index.js";import{jsxs as p,Fragment as a,jsx as m}from"react/jsx-runtime";import{makeStyles as c,Dialog as d,DialogTitle as u,Typography as f,Tooltip as j,IconButton as C,DialogContent as v,DialogActions as b,Button as g}from"@material-ui/core";import{useRef as x,useState as A,useMemo as h,useEffect as S,useCallback as D}from"react";import"querystring";import"uuid/v1";import"../../clients/jsonApi/index.js";import"../../clients/subscriptions.js";import"uuid";import"@babel/runtime/helpers/objectWithoutProperties";import y from"prop-types";import I from"classnames";import{Close as W}from"@material-ui/icons";import"../Modal/index.js";import"../IconMenu/index.js";import"../StyledMenuItem/index.js";import P from"../LoadingIndicator/LoadingIndicator.js";import"../DevCenter/DevCenterAppContainer/components/AppActions/AppActions.css.js";import"../EmptyView/EmptyAppView/EmptyAppView.js";import"../ErrorBoundary/ErrorBoundary.js";import"../Typography.js";import"../ErrorBoundary/DevCenterAppErrorView/DevCenterAppErrorView.js";import"../ConfirmationDialog.js";import"../DevCenter/DevCenterAppContainer/components/DisabledSettingsMessage/DisabledSettingsMessage.js";import"slate";import"../SlateFormattedText/RenderElements.js";import"../SlateFormattedText/SlateFormattedText.js";import"../DevCenter/DevCenterAppContainer/components/AppSettingsDialog/AppSettingsDialog.js";import"../DevCenter/DevCenterAppContainer/components/AnnotationsButton/AnnotationsButton.js";import"../DevCenter/DevCenterAppContainer/components/NonPriorityMenus/NonPriorityMenus.js";import"../DevCenter/DevCenterAppContainer/components/FullscreenButton/FullscreenButton.js";import"../DevCenter/DevCenterAppContainer/components/AppInfoMessage/AppInfoMessage.js";import"../EmptyView/EmptyAppView/components/ErrorSubtitleWithIntercomLink.js";import"../DevCenter/DevCenterAppContainer/components/HelpCenterDialog/HelpCenterDialog.js";import"../DevCenter/DevCenterAppContainer/components/DcTooltipsCoordinatorProvider/DcTooltipsCoordinatorProvider.js";import"../DevCenter/DevCenterAppContainer/components/IsInsideDcAppProvider/IsInsideDcAppProvider.js";import"../Tooltip/MuiTooltipDcWrapper.js";import"../Avatar/index.js";import"../Annotations/AnnotationsContext.js";import"../DevCenter/DevCenterRouterContext/DevCenterRouterContext.js";import"react-router";import"../DevCenter/DevCenterRouterContext/UniversalLink/UniversalLink.js";import"../Annotations/components/AnnotationsList/index.js";import"../Annotations/components/LastAnnotation/index.js";import"../PadModeSelect/PadModeSelect.js";import"../DevCenter/AppHeader/AppHeader.js";import"../DevCenter/AppSideBar/AppSideBar.js";import"../DevCenter/AppContext.js";import"../DevCenter/AppsDataProvider/AppsDataProvider.js";import"@material-ui/icons/Help";import"../DevCenter/DevCenterAppContainer/DevCenterAppContainer.css.js";import"../DevCenter/DevCenterAppContainer/components/RestoreAppSizeButton/index.js";import"../DevCenter/DevCenterAppContainer/components/PriorityMenus/PriorityMenus.css.js";import"../DevCenter/NavigationBar/NavigationBar.js";import"../DevCenter/SideBar/SideBar.js";import"../DevCenter/AppSettingsPopover/AppSettingsPopover.js";import"../TruncatedText/index.js";import"../AssetEditor/SingleAssetEditor.js";import"../AssetEditor/AssetEditorAutocomplete.js";import"../AssetEditor/index.js";import"../AppVersionsSelect/AppVersionsSelect.js";import"../CollapsableSidebar.js";import"../DateTimePicker/index.js";import"../DatePicker/index.js";import"../ColorPicker/PaletteChromePicker/PaletteChromePicker.js";import"../ColorPicker/ColorPicker.js";import"../ParameterCharts/AddEditTrack.js";import"../ParameterCharts/ParameterCharts.js";import"../ChartActionsList/ChartActionsList.js";import"../SettingEditors/ColorEditor/index.js";import"../SettingEditors/DropdownEditor/index.js";import"../SettingEditors/RadioEditor/index.js";import"../SwitchControl/index.js";import"../RangeSlider/RangeSlider.js";import"../Login/components/Login.js";import"../Login/components/PasswordField.js";import"../Login/components/Chip.js";import"../Login/components/StepFooter.js";import"../Login/components/StepContent.js";import"../Login/components/StepHeader.js";import"../Login/components/Step.js";import"../Login/components/OrDivider.js";import"../Login/components/HiddenEmailField.js";import"../Login/components/EmailField.js";import"../Breadcrumbs/index.js";import"../VirtualizedTable/index.js";import"../EmptyView/EmptyView.js";import"../Button/index.js";import"../MenuItem/index.js";import"../ContextMenuItem/index.js";import"../FolderMenuItem/index.js";import"../EditableItem/EditableItem/index.js";import"../EditableItem/EditableItemWithBadge/index.js";import"../Checkbox/index.js";import"../FolderMenuItemWithLinks/index.js";import"../IconButton/index.js";import"../TextField/index.js";import"../Chip/index.js";import"../Counter/index.js";import"../AnchorsList/AnchorsList.js";import"../Select/index.js";import"../Tabs/Tabs.js";import"../Tabs/Tab.js";import"../Drillstring/BHASchematic.js";import"../Drillstring/BHAComponentIcon.js";import"../Drillstring/BHATable/index.js";import"../Drillstring/BHAComponentDetail/index.js";import"../Casing/CasingComponentIcon.js";import"../Casing/CasingTable/index.js";import"../WellSummary/WellSummaryItemLabel.js";import"../WellSummary/WellSummaryItemTitle.js";import"../WellSummary/WellSummaryItemValue.js";import"../WellSummary/ActivitySummaryChart.js";import"../WellSummary/FracWirelineTimeChart.js";import{useWells as k,useFetchBicWellsData as E}from"./effects/index.js";import T from"./components/Map/index.js";import w from"./components/WellSection/index.js";import{DEFAULT_WELL_SECTIONS as B}from"./constants.js";import O from"../OffsetWellPickerV2/OffsetWellPickerDialog.js";import"../Notifications/Notifications.js";import"../TextLink/index.js";import"../Template/TemplatePopover/index.js";import"../PinnableFilters/PinnableFilters.js";import"../HeaderLayout/HeaderLayout.js";import"../PadOffsetsPicker/PadOffsetsPicker.js";import"../PadOffsetsPicker/OffsetAssetChip.js";import"../PadOffsetsPicker/OffsetAssetsListExpander.js";import"../PadOffsetsPicker/StagesSelector.js";import"../Table/TableToolbar/TableToolbar.js";import"../PriceInput/PriceInput.js";import"../LabelsCounter/LabelsCounter.js";import"../Stepper/Step.js";import"../Stepper/StepsWrapper.js";import"../Stepper/Stepper.js";import"../Comment/CommentIcon/index.js";import"../FilesLoader/FilesLoader.js";import"../SearchInput/index.js";function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?L(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N=c({paper:{width:"541px"},dialogTitles:{display:"flex",flexDirection:"column"},titleContent:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},title:{fontSize:"20px"},description:{fontSize:"12px",lineHeight:"16px",fontWeight:"normal",color:"rgba(255, 255, 255, 0.54)"},closeIconButton:{fontSize:"20px",padding:4,"&:hover $closeIcon":{color:"#fff"}},closeIcon:{color:"#BDBDBD"},dialogActions:{display:"flex",justifyContent:"flex-end",boxShadow:"0px -4px 10px rgba(0, 0, 0, 0.25)",paddingTop:8,paddingBottom:8},dialogActionsSmallScreen:{paddingRight:"100px"},dialogContent:{display:"flex",marginTop:"2px",marginBottom:"24px",flexDirection:"column"}});function F(e,t){var n=e.find((function(e){return e.id===t}));return r(n,"name")||"-"}function H(e,t){var n=e.find((function(e){return e.id===t}));return r(n,"rigName")||"-"}function R(e,t){return"well"===e.value?"Best Wells":"area"===e.value?"Area Offsets":"Best ".concat(e.value,"section"===t?" Wells":' " Wells')}function V(e){return e.map((function(e){return M(M({},e),{},{wells:e.wells.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))})}))}function U(e){var t=r(e,"bicWellIds")||[],i=r(e,"manualWellIds")||[],o=r(e,"selectedWellIds")||[];return n(t.concat(i).concat(o))}function z(e){var c=e.defaultSubjectWell,y=e.offsetSetting,L=e.currentUser,z=e.isOpen,_=e.onClose,q=e.onSave,G=e.addWellsUsabilityInfo,K=e.unusableWellAlarm,Q=N(),$=x(!0),J=A(r(c,"companyId")||r(y,"companyId")||+r(L,"company_id")),X=s(J,2),Y=X[0],Z=X[1],ee=A(r(c,"asset_id")||r(y,"subjectWellId")||null),te=s(ee,2),re=te[0],ne=te[1],ie=k(Y,z),oe=E(re,z),se=A([]),le=s(se,2),pe=le[0],ae=le[1],me=A(!1),ce=s(me,2),de=ce[0],ue=ce[1],fe=A(y),je=s(fe,2),Ce=je[0],ve=je[1],be=A(!1),ge=s(be,2),xe=ge[0],Ae=ge[1],he=h((function(){if(ie){var e=U(Ce);return ie.filter((function(t){return e.find((function(e){return e===r(t,"id")}))}))}return[]}),[ie,Ce]);S((function(){z&&(Z(r(c,"companyId")||r(y,"companyId")||+r(L,"company_id")),ne(r(c,"asset_id")||r(y,"subjectWellId")||null),ve(y),Ae(!1),$.current=!0)}),[y,z]),S((function(){if(z&&ie&&$.current){var e,o=r(Ce,"selectedWellIds")||[],s=r(Ce,"manualWellIds")||[],p=r(Ce,"bicWellIds")||[],a=o.concat(s),m=a.filter((function(e){return ie.find((function(t){return t.id===e}))})).map((function(e){return{id:e,checked:!0,name:F(ie,e),rigName:H(ie,e),kind:o.includes(e)?"advanced":"manual"}}));if(oe&&oe.filters&&oe.result){var c,d=[],u=[{name:"Wells within Area",value:"area"}].concat(t(r(oe,["filters","filterTabs"]))),f=(null===(c=oe.filters)||void 0===c?void 0:c.filterMode)||"holeSize",j=n(u);e=[{name:"Search Results",wells:m,expanded:xe}].concat(t(j.map((function(e){var t;return{name:R(e,f),wells:(null===(t=oe.result[e.value])||void 0===t?void 0:t.filter((function(e){return ie.find((function(t){return t.id===e}))})).map((function(e){var t="object"===l(e)?e.id:e;return d.push(t),{id:t,checked:!1,name:F(ie,t),rigName:H(ie,t),kind:"best"}})))||[],expanded:!1}}))))}else e=[{name:"Search Results",wells:m,expanded:xe}].concat(t(B));var C=e.map((function(e){var t=e.wells.map((function(e){return i(p,e.id)||i(a,e.id)?M(M({},e),{},{checked:!0}):M({},e)}));return M(M({},e),{},{wells:t})}));ae(V(C))}}),[z,ie,oe,Ce]);var Se=D((function(){return U(Ce).length}),[Ce]),De=D((function(){return(r(Ce,"bicWellIds")||[]).length})),ye=!ie;return p(a,{children:[p(d,{onBackdropClick:_,onEscapeKeyDown:_,open:z,classes:{paper:Q.paper},children:[m(u,{children:p("div",{className:Q.dialogTitles,children:[p("div",{className:Q.titleContent,children:[m(f,{className:Q.title,children:"Select Offset Wells"}),m(j,{title:"Close",children:m(C,{"data-not-migrated-muiiconbutton":!0,"aria-label":"close",className:Q.closeIconButton,onClick:_,children:m(W,{className:Q.closeIcon})})})]}),m("div",{className:Q.description,children:"Quickly add all of the Best-In-Class Wells per section selected from the Offsets Well Selection Application."})]})}),m(v,{className:Q.dialogContent,children:ye?m(P,{fullscreen:!1}):p(a,{children:[m(T,{wells:he,offsetWells:he}),m(w,{company:Y,wellSections:pe,getWellName:F,onChangeWellSections:function(e){var t=V(e);ae(t),Ae(t[0].expanded);var r=[],i=[],o=[];t.forEach((function(e){e.wells.forEach((function(e){e.checked&&"advanced"===e.kind&&r.push(e.id),e.checked&&"manual"===e.kind&&i.push(e.id),e.checked&&"best"===e.kind&&o.push(e.id)}))}));var s=r.concat(i).concat(o),l=M(M({},Ce),{},{selectedWellIds:n(r),manualWellIds:n(i),bicWellIds:n(o),resultWellIds:n(s)});ve(l),$.current=!1},onExploreMode:function(){ue(!0)}})]})}),m(b,{className:I(Q.dialogActions),children:p("div",{children:[m(g,{onClick:_,color:"primary",children:"Cancel"}),p(g,{variant:"contained",color:"primary",onClick:function(){var e=U(Ce),t=ie.filter((function(t){return i(e,t.id)})),r=M(M({},Ce),{},{companyId:+Y,resultWellIds:e});ue(!1),q(r,t)},children:["Add (",Se(),")"]})]})})]}),de&&m(O,{defaultSubjectWellId:r(c,"asset_id"),companyId:+Y,offsetSetting:Ce,currentUser:L,addWellsUsabilityInfo:G,unusableWellAlarm:K,isAdvancedSearch:!0,bestCount:De(),isOpen:de,onClose:function(){ue(!1)},onSave:function(e){var t=e;c||(o(re,r(t,"subjectWellId"))&&o(Y,r(t,"companyId"))||(t=M(M({},t),{},{bicWellIds:[],manualWellIds:[],resultWellIds:[]})),ne(r(t,"subjectWellId")),Z(r(t,"companyId")));var n=r(t,"manualWellIds")||[],i=r(t,"selectedWellIds")||[];n=n.filter((function(e){return!i.includes(e)})),t=M(M({},t),{},{manualWellIds:n}),ve(t),$.current=!0,Ae(!0),ue(!1)}})]})}z.propTypes={defaultSubjectWell:y.shape({}),offsetSetting:y.shape({subjectWellId:y.number,companyId:y.number}),currentUser:y.shape({}),isOpen:y.bool.isRequired,onClose:y.func.isRequired,onSave:y.func.isRequired,addWellsUsabilityInfo:y.func,unusableWellAlarm:y.string},z.defaultProps={defaultSubjectWell:null,addWellsUsabilityInfo:null,unusableWellAlarm:"Unable to add",offsetSetting:{},currentUser:{}};export default z;

import e from"@babel/runtime/helpers/defineProperty";import r from"@babel/runtime/helpers/slicedToArray";import{jsx as i,jsxs as n}from"react/jsx-runtime";import{Collapse as o,Popover as t}from"@material-ui/core";import{useState as l}from"react";import c from"@babel/runtime/helpers/objectWithoutProperties";import a from"prop-types";import{withStyles as s}from"@material-ui/core/styles";import{SizeMe as d}from"react-sizeme";import p from"./components/FiltersToggler.js";import m from"./components/PinAppSwitch.js";import{getStartComponent as u,getMiddleComponent as h,getEndComponents as f}from"./utils.js";import{LARGE_SIZE_LAYOUT as b,MEDIUM_SIZE_LAYOUT as v,SMALL_SIZE_LAYOUT as P}from"./constants.js";import{useComonentsWidth as O,useAppFilterTogglerWidth as y,useFilterLayout as j}from"./effects/index.js";import g from"./PinnableFilters.css.js";function w(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),i.push.apply(i,n)}return i}function N(r){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?w(Object(n),!0).forEach((function(i){e(r,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}))}return r}function S(e){var c=e.children,a=e.classes,s=e.appWidth,d=e.isPinnedInitial,w=e.isShownInitial,N=e.onShowCallback,S=e.onPinCallback,k=l(null),C=r(k,2),M=C[0],T=C[1],B=l(d),W=r(B,2),I=W[0],E=W[1],q=l(w),z=r(q,2),D=z[0],L=z[1],R=l(!1),x=r(R,2),A=x[0],F=x[1],G=function(e){L(e),N&&N(e)},H=O(c),J=y(),K=j(c,H,J,s),Q=u(c),U=h(c),V=f(c),X=function(e){I?G(!D):T(e.currentTarget)},Y=function(){var e,r=!I;r&&(T(null),G(!0)),E(e=r),S&&S(e)};return n("div",{style:{width:"100%"},children:[i(o,{timeout:10,in:K===b,children:n("div",{className:g.containerLarge,children:[i("div",{children:Q}),n("div",{className:g.containerLargeTopright,children:[U,V]})]})}),i(o,{timeout:10,in:K===v,children:n("div",{className:g.containerMedium,children:[n("div",{className:g.containerMediumTop,children:[n("div",{className:g.containerButtonsWrapper,onMouseEnter:function(){return F(!0)},onMouseLeave:function(){return F(!1)},children:[i(p,{onClick:X}),(A||I||Boolean(M))&&i(m,{isPinned:I,onClick:Y})]}),n("div",{className:g.containerMediumTopright,children:[U,V]})]}),i(o,{timeout:100,in:I&&D,children:i("div",{className:g.containerMediumBottom,children:Q})})]})}),i(o,{timeout:10,in:K===P,children:n("div",{className:g.containerSmall,children:[n("div",{className:g.containerSmallTop,children:[n("div",{className:g.containerButtonsWrapper,onMouseEnter:function(){return F(!0)},onMouseLeave:function(){return F(!1)},children:[i(p,{onClick:X}),(A||I||Boolean(M))&&i(m,{isPinned:I,onClick:Y})]}),i("div",{children:V})]}),i(o,{timeout:100,in:I&&D,children:i("div",{className:g.containerSmallMiddle,children:Q})}),i("div",{className:g.containerSmallBottom,children:U})]})}),i(t,{id:"filters-popper",classes:{paper:a.paper},open:Boolean(M),anchorEl:M,onClose:function(){T(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:i("div",{className:g.containerPopper,children:Q})})]})}S.propTypes={classes:a.shape({}).isRequired,appWidth:a.number.isRequired,children:a.arrayOf(a.node).isRequired,isPinnedInitial:a.bool,isShownInitial:a.bool,onShowCallback:a.func,onPinCallback:a.func},S.defaultProps={isPinnedInitial:!1,isShownInitial:!1,onShowCallback:void 0,onPinCallback:void 0};var k=s({paper:{backgroundColor:"#414141"}})(S);function C(e){var r=e.children,n=c(e,["children"]);return i(d,{monitorWidth:!0,children:function(e){var o=e.size;return i(k,N(N({appWidth:o.width-21},n),{},{children:r}))}})}C.propTypes={children:a.arrayOf(a.node).isRequired};export default C;

import{isEqual as r}from"lodash";import e from"@babel/runtime/helpers/slicedToArray";import{jsxs as t,Fragment as n,jsx as o}from"react/jsx-runtime";import{Tooltip as i,IconButton as c,Menu as s,MenuItem as a,Checkbox as l,ListItemText as m}from"@material-ui/core";import{useState as u,useEffect as p}from"react";import f from"prop-types";import{withStyles as d}from"@material-ui/core/styles";import h from"@material-ui/icons/Settings";import{METRICS_LIST as g,MAX_METRICS_COUNT as y}from"../../constants.js";function k(f){var d=f.metricsKeys,k=f.onChange,x=f.classes,B=u([]),b=e(B,2),v=b[0],C=b[1],I=u(null),T=e(I,2),z=T[0],P=T[1];p((function(){C(d)}),[d]);return t(n,{children:[o(i,{title:"Add Metric",children:o(c,{"data-not-migrated-muiiconbutton":!0,className:x.settingsIconButton,onClick:function(r){P(r.currentTarget)},children:o(h,{className:x.settingsIcon})})}),o(s,{id:"simple-menu",anchorEl:z,getContentAnchorEl:null,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},PaperProps:{style:{maxHeight:"300px",backgroundColor:"#414141"}},keepMounted:!0,open:Boolean(z),onClose:function(){P(null),r(v,d)||k(v)},children:g.map((function(r){return t(a,{disabled:v.length===y&&!v.includes(r.key),onClick:function(){return e=r.key,void(v.includes(e)?C((function(r){return r.filter((function(r){return r!==e}))})):C((function(r){return r.concat(e)})));var e},children:[o(l,{checked:v.includes(r.key),className:x.checkBox}),o(m,{primary:r.label,classes:{primary:x.listItemPrimaryText}})]},r.key)}))})]})}k.propTypes={metricsKeys:f.arrayOf(f.string).isRequired,onChange:f.func.isRequired,classes:f.shape({}).isRequired};var x=d({settingsIconButton:{padding:"8px","&:hover":{"& $settingsIcon":{color:"#fff"}}},settingsIcon:{color:"#BDBDBD",fontSize:16},listItemPrimaryText:{color:"#fff",fontSize:"14px"},checkBox:{color:"grey",padding:"5px"}})(k);export default x;

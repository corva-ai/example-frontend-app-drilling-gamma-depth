import t from"@babel/runtime/helpers/defineProperty";import"@babel/runtime/helpers/toConsumableArray";import"../../../constants/completion.js";import"../../../constants/alerts.js";import{pickBy as e,pick as o,noop as i}from"lodash";import r from"@babel/runtime/helpers/slicedToArray";import{DEV_CENTER_CLI_APP_ID as n}from"../../../constants/devcenter.js";import"../../../constants/goals.js";import{SEGMENTS as s}from"../../../constants/segment.js";import"../../../constants/apps.js";import"../../../constants/drillstring.js";import"../../../constants/notifications.js";import{getAppName as p,getTimestampFromQuery as a}from"../../../utils/devcenter.js";import"@babel/runtime/regenerator";import"@babel/runtime/helpers/asyncToGenerator";import{isNativeDetected as m,isMobileDetected as l}from"../../../utils/mobileDetect.js";import{showSuccessNotification as d}from"../../../utils/notificationToasts.js";import"@babel/runtime/helpers/typeof";import{isDevOrQAEnv as c}from"../../../utils/env.js";import"../../../utils/index.js";import{jsx as u,jsxs as j,Fragment as g}from"react/jsx-runtime";import{useTheme as A}from"@material-ui/core";import{useContext as f,useState as C}from"react";import"querystring";import"uuid/v1";import"../../../clients/jsonApi/index.js";import"../../../clients/subscriptions.js";import S from"../../../effects/useDevCenterApp.js";import"uuid";import"@babel/runtime/helpers/objectWithoutProperties";import v from"classnames";import"../../Modal/index.js";import"../../IconMenu/index.js";import"../../StyledMenuItem/index.js";import"../../LoadingIndicator/LoadingIndicator.js";import b from"./components/AppActions/AppActions.js";import"../../EmptyView/EmptyAppView/EmptyAppView.js";import"../../ErrorBoundary/ErrorBoundary.js";import"../../Typography.js";import"../../ErrorBoundary/DevCenterAppErrorView/DevCenterAppErrorView.js";import"../../ConfirmationDialog.js";import"./components/DisabledSettingsMessage/DisabledSettingsMessage.js";import"slate";import"../../SlateFormattedText/RenderElements.js";import"../../SlateFormattedText/SlateFormattedText.js";import x from"./components/AppSettingsDialog/AppSettingsDialog.js";import h from"./components/AnnotationsButton/AnnotationsButton.js";import I from"./components/NonPriorityMenus/NonPriorityMenus.js";import y from"./components/FullscreenButton/FullscreenButton.js";import"./components/AppInfoMessage/AppInfoMessage.js";import D from"./components/DevCenterAppView/DevCenterAppView.js";import P from"./components/HelpCenterDialog/HelpCenterDialog.js";import{DcTooltipsCoordinatorProvider as L}from"./components/DcTooltipsCoordinatorProvider/DcTooltipsCoordinatorProvider.js";import{IsInsideDcAppProvider as M}from"./components/IsInsideDcAppProvider/IsInsideDcAppProvider.js";import"../../Tooltip/MuiTooltipDcWrapper.js";import"../../Avatar/index.js";import{AnnotationsProvider as E}from"../../Annotations/AnnotationsContext.js";import{DevCenterRouterContext as T}from"../DevCenterRouterContext/DevCenterRouterContext.js";import"react-router";import"../DevCenterRouterContext/UniversalLink/UniversalLink.js";import O from"../../Annotations/components/AnnotationsList/index.js";import"../../Annotations/components/LastAnnotation/index.js";import"../../PadModeSelect/PadModeSelect.js";import"../AppHeader/AppHeader.js";import"../AppSideBar/AppSideBar.js";import k from"../AppContext.js";import"../AppsDataProvider/AppsDataProvider.js";import F from"@material-ui/icons/Help";import B from"./effects/useAppSettings.js";import w from"./effects/useAnnotationsList.js";import H from"./effects/useAnnotationsData.js";import R from"./effects/useAppMaximized.js";import W from"./effects/useHelpCenter.js";import z from"./DevCenterAppContainer.css.js";import N from"./components/RestoreAppSizeButton/index.js";import{getAppVersion as V}from"./utils.js";import _ from"./components/PriorityMenus/PriorityMenus.js";import"../NavigationBar/NavigationBar.js";import"../SideBar/SideBar.js";import"../AppSettingsPopover/AppSettingsPopover.js";import"../../TruncatedText/index.js";import"../../AssetEditor/SingleAssetEditor.js";import"../../AssetEditor/AssetEditorAutocomplete.js";import"../../AssetEditor/index.js";import"../../AppVersionsSelect/AppVersionsSelect.js";import"../../CollapsableSidebar.js";import"../../DateTimePicker/index.js";import"../../DatePicker/index.js";import"../../ColorPicker/PaletteChromePicker/PaletteChromePicker.js";import"../../ColorPicker/ColorPicker.js";import"../../ParameterCharts/AddEditTrack.js";import"../../ParameterCharts/ParameterCharts.js";import"../../ChartActionsList/ChartActionsList.js";import"../../SettingEditors/ColorEditor/index.js";import"../../SettingEditors/DropdownEditor/index.js";import"../../SettingEditors/RadioEditor/index.js";import"../../SwitchControl/index.js";import"../../RangeSlider/RangeSlider.js";import"../../Login/components/Login.js";import"../../Login/components/PasswordField.js";import"../../Login/components/Chip.js";import"../../Login/components/StepFooter.js";import"../../Login/components/StepContent.js";import"../../Login/components/StepHeader.js";import"../../Login/components/Step.js";import"../../Login/components/OrDivider.js";import"../../Login/components/HiddenEmailField.js";import"../../Login/components/EmailField.js";import"../../Breadcrumbs/index.js";import"../../VirtualizedTable/index.js";import"../../EmptyView/EmptyView.js";import"../../Button/index.js";import"../../MenuItem/index.js";import"../../ContextMenuItem/index.js";import"../../FolderMenuItem/index.js";import"../../EditableItem/EditableItem/index.js";import"../../EditableItem/EditableItemWithBadge/index.js";import"../../Checkbox/index.js";import"../../FolderMenuItemWithLinks/index.js";import U from"../../IconButton/index.js";import"../../TextField/index.js";import"../../Chip/index.js";import"../../Counter/index.js";import"../../AnchorsList/AnchorsList.js";import"../../Select/index.js";import"../../Tabs/Tabs.js";import"../../Tabs/Tab.js";import"../../Drillstring/BHASchematic.js";import"../../Drillstring/BHAComponentIcon.js";import"../../Drillstring/BHATable/index.js";import"../../Drillstring/BHAComponentDetail/index.js";import"../../Casing/CasingComponentIcon.js";import"../../Casing/CasingTable/index.js";import"../../WellSummary/WellSummaryItemLabel.js";import"../../WellSummary/WellSummaryItemTitle.js";import"../../WellSummary/WellSummaryItemValue.js";import"../../WellSummary/ActivitySummaryChart.js";import"../../WellSummary/FracWirelineTimeChart.js";import"../../BICOffsetPickerDialog/index.js";import"../../OffsetWellPickerV2/OffsetWellPickerDialog.js";import"../../Notifications/Notifications.js";import"../../TextLink/index.js";import"../../Template/TemplatePopover/index.js";import"../../PinnableFilters/PinnableFilters.js";import"../../HeaderLayout/HeaderLayout.js";import"../../PadOffsetsPicker/PadOffsetsPicker.js";import"../../PadOffsetsPicker/OffsetAssetChip.js";import"../../PadOffsetsPicker/OffsetAssetsListExpander.js";import"../../PadOffsetsPicker/StagesSelector.js";import"../../Table/TableToolbar/TableToolbar.js";import"../../PriceInput/PriceInput.js";import"../../LabelsCounter/LabelsCounter.js";import"../../Stepper/Step.js";import"../../Stepper/StepsWrapper.js";import"../../Stepper/Stepper.js";import"../../Comment/CommentIcon/index.js";import"../../FilesLoader/FilesLoader.js";import"../../SearchInput/index.js";function q(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function G(e){for(var o=1;o<arguments.length;o++){var i=null!=arguments[o]?arguments[o]:{};o%2?q(Object(i),!0).forEach((function(o){t(e,o,i[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var K=m||l;function J(t){var l,q,J,Q,X,Y,Z,$=t.CLIAppComponent,tt=t.CLIAppSettings,et=t.app,ot=t.appId,it=t.className,rt=t.coordinates,nt=t.currentDashboardAppsLastAnnotations,st=t.currentUser,pt=t.devCenterRouter,at=t.isActionsDisabled,mt=t.isAppSubscribed,lt=void 0===mt||mt,dt=t.isAssetSubscriptionFeatureActive,ct=t.isSettingsDialogHidden,ut=t.layoutEnvironment,jt=t.onAppContainerClick,gt=void 0===jt?i:jt,At=t.onAppRemove,ft=t.onCloneDashboard,Ct=t.onIsMaximizedChange,St=t.onSettingChange,vt=t.onSettingsChange,bt=t.setIsFullscreenModalMode,xt=void 0===bt?i:bt,ht=t.updateCurrentDashboardAppLastAnnotation,It=t.openIntercom,yt=void 0===It?i:It,Dt=f(k),Pt=A(),Lt=C([]),Mt=r(Lt,2),Et=Mt[0],Tt=Mt[1],Ot=C([]),kt=r(Ot,2),Ft=kt[0],Bt=kt[1],wt=null!==(l=null==Dt?void 0:Dt[ot||et.id])&&void 0!==l?l:{isLoading:!0},Ht=null===(q=et.package)||void 0===q||null===(J=q.manifest)||void 0===J?void 0:J.application,Rt=(null==Ht||null===(Q=Ht.segments)||void 0===Q?void 0:Q[0])||s.DRILLING,Wt=!(null==Ht||null===(X=Ht.ui)||void 0===X||!X.multi_rig),zt=p(et),Nt=R({onIsMaximizedChange:Ct,devCenterRouter:pt,appId:ot}),Vt=Nt.isMaximized,_t=Nt.setIsMaximized,Ut=a(null===(Y=pt.location.query)||void 0===Y?void 0:Y.query),qt=et.id===n&&K?G(G({},rt),{},{w:12}):rt,Gt=S({CLIAppComponent:$,CLIAppSettings:tt,url:null==et||null===(Z=et.package)||void 0===Z?void 0:Z.url,appKey:et.app.app_key,version:V(et)}),Kt=Gt.isLoading,Jt=Gt.AppSettings,Qt=Gt.AppComponent,Xt=B({setIsFullscreenModalMode:xt}),Yt=Xt.isAppSettingsDialogOpened,Zt=Xt.toggleAppSettingsDialog,$t=W({setIsFullscreenModalMode:xt}),te=$t.isHelpCenterOpened,ee=$t.toggleHelpCenter,oe=w(),ie=oe.isAnnotationsListOpened,re=oe.toggleAnnotationsList,ne=Kt||!st||!Wt&&wt.isLoading,se=pt.location,pe=se.pathname,ae=se.query,me=H({app:et,appData:wt,currentDashboardAppsLastAnnotations:nt}),le=me.appLastAnnotation,de=me.assetCompanyId,ce=me.assetIdForAnnotation,ue=me.isAppSupportsAnnotations,je=e(o(wt,["well","rig","fracFleet","wells"]),Boolean);return u(T.Provider,{value:pt,children:u(L,{setIsFullscreenModalMode:xt,children:u(M,{value:!0,children:j("div",{className:v("dc-app-container",it,Vt&&"dc-app-container__maximized",Pt.isLightTheme&&"dc-app-container__light-theme",z.container),"data-testid":"".concat("DevCenter_AppContainer","_").concat(et.app.name),onClick:function(){return gt()},children:[u("div",{className:z.containerContent,children:u(D,{AppComponent:Qt,app:et,appData:je,isAppLoading:Kt,isAppSubscribed:lt,isLoading:ne,isMultiRig:Wt,layoutEnvironment:ut,segment:Rt,openIntercom:yt,appProps:{coordinates:qt,currentUser:st,devCenterRouter:pt,onSettingChange:St,onSettingsChange:vt,setIsFullscreenModalMode:xt,setIsMaximized:_t,setMainMenuItems:Tt,setSecondaryMenuItems:Bt,appHeaderProps:G({app:et,appLastAnnotation:le,appSettings:et.settings,coordinates:qt,currentUser:st,isMaximized:Vt,layoutEnvironment:ut,onSettingChange:St,toggleAnnotationsList:re,updateCurrentDashboardAppLastAnnotation:ht},je),isNative:m,layoutEnvironment:ut,timestamp:Ut}})}),Yt&&u(x,{AppSettingsComponent:Jt,app:et,appData:wt,appName:zt,currentUser:st,isAssetSubscriptionFeatureActive:dt,isMultiRig:Wt,isSettingsDialogHidden:ct,layoutEnvironment:ut,onAppRemove:At,onCloneDashboard:ft,onSettingChange:St,onSettingsChange:vt,segment:Rt,timestamp:Ut,toggleAppSettingsDialog:Zt}),ie&&u(E,{children:u(O,{appId:et.app.id,appSettings:et.settings,appTitle:et.name,assetCompanyId:de,assetId:ce,currentUser:st,onClose:re,showSuccessNotification:d})}),te&&u(P,{appName:et.name,onClose:ee}),!at&&Vt&&u(N,{setIsMaximized:_t}),j(b,{children:[ue&&u(h,{toggleAnnotationsList:re}),c&&u(U,{onClick:ee,children:u(F,{})}),K&&!Vt?u(y,{setIsMaximized:_t}):j(g,{children:[u(_,{menuItems:Et,devCenterRouter:pt}),u(I,{appId:et.id,devCenterRouter:pt,isMaximized:Vt,menuItems:Ft,pathname:pe,query:ae,setIsMaximized:_t,toggleAppSettingsDialog:Zt})]})]})]})})})})}export default J;

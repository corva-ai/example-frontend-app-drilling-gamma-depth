import e from"@babel/runtime/helpers/defineProperty";import{pick as r}from"lodash";import t from"@babel/runtime/helpers/slicedToArray";import{GRID_BREAKPOINTS as o,GRID_COLUMN_SIZES as i,GRID_ROW_HEIGHT as a,NON_DRAGGABLE_ELEMENT_SELECTOR as n}from"../../../constants/apps.js";import{isAppMaximized as c}from"../../../utils/devcenter.js";import{isPhoneDetected as l,isNativeDetected as s,isMobileDetected as p}from"../../../utils/mobileDetect.js";import{getAppSize as d}from"../../../utils/apps.js";import"../../../utils/index.js";import{jsxs as m,jsx as b}from"react/jsx-runtime";import{makeStyles as u,Tooltip as f,FormControlLabel as g,Switch as h}from"@material-ui/core";import{useState as y}from"react";import j from"@babel/runtime/helpers/objectWithoutProperties";import O from"classnames";import{getLocalAppData as v,getAppCoordinates as k,updateLocalAppData as w}from"../utils.js";import{WidthProvider as D,Responsive as L}from"react-grid-layout";import"./withGridLayoutHOC.global.css.js";import x from"./withGridLayoutHOC.css.js";function P(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function C(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?P(Object(o),!0).forEach((function(t){e(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):P(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}var S=D(L),z=u({gridLockFormControl:{margin:"4px 0 0 2px"},gridLockLabel:{fontSize:14},gridLockLabelDisabled:{color:"#bdbdbd"}});export default function(e){return D((function(u){var D,L=u.width,P=j(u,["width"]),H=P.manifest.application.key,W=y(null!==(D=v(H).isDraggable)&&void 0!==D&&D),E=t(W,2),G=E[0],M=E[1],N=z(),R=s||p,F=c(P.devCenterRouter.location.query),T=y(k(P.manifest)),q=t(T,2),A=q[0],B=q[1],_=d({coordinates:A,dashboardWidth:L,isMaximized:F}),I=_.pixelHeight,J=_.pixelWidth,K=function(e){var o=t(e,1)[0],i=r(o,["x","y","w","h"]);B(i),w(H,{coordinates:i})};return m("div",{children:[b(S,{breakpoints:l?o.phone:o.general,cols:i,rowHeight:a,measureBeforeMount:!0,onResizeStop:K,onDragStop:K,isDraggable:!R&&G,isResizable:!R&&G,draggableCancel:n,useCSSTransforms:!1,children:b("div",{"data-grid":A,children:b("div",{className:F?x.appMaximized:"",children:b(e,C(C({},P),{},{coordinates:C(C({},A),{},{pixelHeight:I,pixelWidth:J}),layoutEnvironment:{type:"general"}}))})},"with-grid-layout-hoc")}),b(f,{title:G?"":"Disable grid lock to move and resize your app",placement:"right",children:b(g,{className:N.gridLockFormControl,control:b(h,{"data-testid":"".concat("DashboardPo","_gridLocked"),onChange:function(e){var r=e.target.checked;M(!r),w(H,{isDraggable:!r})},checked:!G,color:"primary"}),label:b("span",{className:O(N.gridLockLabel,G&&N.gridLockLabelDisabled),children:"Grid locked"})})})]})}))}

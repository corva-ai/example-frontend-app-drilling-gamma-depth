import"@babel/runtime/helpers/defineProperty";import e from"@babel/runtime/regenerator";import r from"@babel/runtime/helpers/asyncToGenerator";import{jsx as t}from"react/jsx-runtime";import"react";import{getUserAutocomplete as n}from"../../../clients/jsonApi/index.js";import"@babel/runtime/helpers/objectWithoutProperties";import"../../DevCenter/DevCenterRouterContext/DevCenterRouterContext.js";import"react-router";import{UniversalLink as o}from"../../DevCenter/DevCenterRouterContext/UniversalLink/UniversalLink.js";import i from"../../UserCardPopover.js";import{PLACEHOLDERS as a,USER_MARKUP as s}from"../constants.js";import c from"../style.css.js";var u,p=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},l=function(e){var r=p(e),t=e[e.indexOf(a.display)+a.display.length],n=e[e.indexOf(a.display)+a.display.length];return new RegExp(r.replace(a.display,"([^".concat(p(t||""),"]+?)")).replace(a.id,"([^".concat(p(n||""),"]+?)")),"g")},m=function(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#039be5",c=arguments.length>4?arguments[4]:void 0;if(!e)return e;var u=l(s),p=e.split(u),m=3,f=p.reduce((function(e,s,u){var l=e;if(u%m-1==0){var f="@".concat(p[u+1]),d=r&&r.length&&r.find((function(e){return e.id===Number(s)})),h=d&&!n?t(i,{user:d,wrapperStyle:{display:"inline-block",color:a},currentUser:c,children:f},"userCard-".concat(u)):t(o,{href:"/config/users/".concat(s),children:f},"userLink-".concat(u));l.push(h)}return u%m==0&&l.push(s),l}),[]);return f},f=function(e){return e.data.map((function(e){return{id:e.id,display:"".concat(e.first_name," ").concat(e.last_name),photo:e.profile_photo,title:e.title}}))},d=(u=r(e.mark((function r(t,o,i){var a,s;return e.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",o([]));case 2:return e.prev=2,e.next=5,n(null,t,i);case 5:a=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:if(a&&0!==a.data.length){e.next=13;break}return e.abrupt("return",o([]));case 13:return s=f(a),e.abrupt("return",o(s));case 15:case"end":return e.stop()}}),r,null,[[2,8]])}))),function(e,r,t){return u.apply(this,arguments)}),h=function(){return document.getElementsByClassName(c.mention__suggestions__list).length>0};export{m as formatMentionText,d as handleFetchUsers,h as isSuggestionsListOpened};

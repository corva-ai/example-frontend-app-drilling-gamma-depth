import e from"@babel/runtime/helpers/slicedToArray";import t from"lodash/get";import{jsxs as o,jsx as r}from"react/jsx-runtime";import{withStyles as n,Tooltip as i,makeStyles as l,Chip as a,Input as c}from"@material-ui/core";import s from"@material-ui/icons/Close";import{useState as p,useRef as u}from"react";import f from"prop-types";import{withRouter as d}from"react-router";import{SEARCH_CATEGORIES as m,CATEGORY_KEY_VALUES as h}from"./constants.js";import x from"./AssetTypesSection.js";import g from"./AssetResultSection.js";import{useAssetsData as C}from"./effects/useAssetsData.js";var b=n((function(){return{tooltip:{backgroundColor:"#414141",color:"#ffffff",fontSize:"11px",lineHeight:"16px",borderRadius:"4px",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.12)",padding:"4px"}}}))(i),v=l((function(){return{wrapper:{width:"460px",display:"flex",flexDirection:"column",padding:16,minWidth:"376px"},inputWrapper:{display:"flex",width:"auto",margin:"0 8px 8px",alignItems:"center",flexWrap:"nowrap",justifyContent:"space-between"},selectedChip:{height:"24px",margin:"4px"},selectedChipDeleteIcon:{width:"16px",height:"16px",color:"#BDBDBD","&:hover":{color:"#ffffff"}},closeIconButton:{padding:0,"&:hover $closeIcon":{color:"#fff"}},searchInput:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:"2px solid #03BCD4"},closeIcon:{color:"#BDBDBD",fontSize:"18px"}}})),y=function(n){var i=n.onClickAsset,l=n.company,f=p(null),d=e(f,2),y=d[0],D=d[1],I=p(null),w=e(I,2),A=w[0],B=w[1],S=p(1),j=e(S,2),k=j[0],R=j[1],W=v(),N=u(),T=C(A,y,k,l),z=e(T,2),q=z[0],K=z[1];return o("div",{className:W.wrapper,children:[r("div",{className:W.inputWrapper,children:o("div",{className:W.searchInput,children:[y&&r(a,{"data-not-migrated-muichip":!0,classes:{root:W.selectedChip,deleteIcon:W.selectedChipDeleteIcon},label:t(m,[y,"labelPlural"],"Assets"),deleteIcon:r(s,{}),onDelete:function(){D(null),R(1)}}),r(c,{"data-testid":"".concat("AutoCompleteAssetSearch","_searchInput"),inputRef:N,autoFocus:!0,disableUnderline:!0,fullWidth:!0,value:A||"",placeholder:"Search ".concat(t(m,[y,"labelPlural"],"assets"),"..."),onChange:function(e){var t=e.target.value;B(t),R(1)},onKeyUp:function(t){var o=t.target.value,r=t.keyCode,n=h.find((function(t){var r=e(t,2);r[0];return r[1].autoCategorizedKey===o.trim().toLowerCase()}));if(n&&(13===r||32===r))return B(""),D(n[0]),void R(1);""===o&&8===r&&(D(null),R(1))}}),r(b,{title:"Clear",children:r(s,{className:W.selectedChipDeleteIcon,onClick:function(){N.current.focus(),B(""),D(null),R(1)}})})]})}),!y&&!A&&r(x,{onClickAssetType:function(e){N.current.focus(),D(e),R(1)}}),(y||A)&&r(g,{loading:q,page:k,groupedAssets:K,onClickAsset:i,onScrollReached:function(e){"top"===e&&k>1&&R((function(e){return e-1})),"bottom"===e&&R((function(e){return e+1}))}})]})};y.propTypes={company:f.number.isRequired,onClickAsset:f.func.isRequired};var D=d(y);export default D;

import t from"@babel/runtime/helpers/defineProperty";import"../../../constants/completion.js";import"../../../constants/alerts.js";import{get as n}from"lodash";import r from"@babel/runtime/helpers/slicedToArray";import{BENCHMARK_METRIC_GOAL as e}from"../../../constants/goals.js";import"../../../constants/segment.js";import"../../../constants/apps.js";import"../../../constants/drillstring.js";import"../../../constants/notifications.js";import{getCompanyGoalSetting as i}from"../../../utils/goals.js";import o from"@babel/runtime/regenerator";import u from"@babel/runtime/helpers/asyncToGenerator";import{mapbox as c}from"../../../utils/index.js";import{useState as s,useEffect as a,useRef as f}from"react";import{FILTERS as l,METRICS_KEYS as p}from"../constants.js";import{fetchCompanies as m,fetchCompanyGoals as h,fetchWells as v,fetchMetricsData as d}from"../utils/apiCalls.js";export{default as useBidirectionalFiltering}from"./biDirectionalFiltering.js";function b(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,e)}return r}function j(n){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?b(Object(e),!0).forEach((function(r){t(n,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):b(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var y=c.getAssetV2Coordinates,g=c.getDistanceByCoordinates;function O(t){var n=f();return a((function(){n.current=t})),n.current}function x(t,n,e){var i=s([]),c=r(i,2),f=c[0],l=c[1];return a((function(){function r(){return(r=u(o.mark((function r(){var i;return o.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=3;break}return l([]),r.abrupt("return");case 3:return r.next=5,m();case 5:i=r.sent,n&&(i=i.filter((function(t){return t.id===e}))),l(i);case 8:case"end":return r.stop()}}),r)})))).apply(this,arguments)}!function(){r.apply(this,arguments)}()}),[]),f}function w(t){var n=s(null),c=r(n,2),f=c[0],l=c[1];return a((function(){function n(){return(n=u(o.mark((function n(){var r,u;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h(t);case 2:r=n.sent,u=i(r,e),l(u);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}l(null),function(){n.apply(this,arguments)}()}),[t]),f}function k(t,n){var e=s(null),i=r(e,2),c=i[0],f=i[1];return a((function(){function r(){return(r=u(o.mark((function r(){var e;return o.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=6;break}return r.next=3,v(t,n);case 3:r.t0=r.sent,r.next=7;break;case 6:r.t0=null;case 7:e=r.t0,f(e);case 9:case"end":return r.stop()}}),r)})))).apply(this,arguments)}f(null),function(){r.apply(this,arguments)}()}),[t]),c}function E(t,n){var e=s(null),i=r(e,2),o=i[0],u=i[1];return a((function(){u(n?Object.values(l).reduce((function(n,r){return n.filter((function(n){return!t[r]||0===t[r].length||t[r].includes(n[r])}))}),n):null)}),[n,t]),o}function P(t,n){var e=s(null),i=r(e,2),o=i[0],u=i[1];return a((function(){if(t){var r=n&&y(n,"topHole");if(r){var e=[];t.forEach((function(t){var n=y(t,"topHole");if(n){var i=parseFloat(g(r,n));e.push(j(j({},t),{},{distance:i}))}else e.push(t)})),u(e)}else u(t)}else u(t)}),[t,n]),o}function D(t,n,e){var i=s(null),o=r(i,2),u=o[0],c=o[1];return a((function(){if(n){var t=[];n.forEach((function(n){e.includes(n.id)&&n.is_usable&&t.push(n)})),c(t)}else c(null)}),[t,n,e]),u}function F(t,e){var i=f({}),c=s(!0),l=r(c,2),m=l[0],h=l[1],v=s(null),b=r(v,2),y=b[0],g=b[1];return a((function(){function r(){return(r=u(o.mark((function r(u){var c,s,a;return o.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d(t,u);case 2:c=r.sent,s={},u.forEach((function(t){var r={},e=c.filter((function(r){return n(r,"asset_id")===t}));p.forEach((function(t){var i=e.find((function(r){return n(r,"data.key")===t})),o=n(i,"data.value");r[t]=Number.isFinite(o)?parseFloat(o).toFixed(2):null})),s[t]=r})),i.current=j(j({},i.current),s),a=[],e.forEach((function(t){a.push(j(j({},t),i.current[t.id]))})),h(!1),g(a);case 10:case"end":return r.stop()}}),r)})))).apply(this,arguments)}if(e)if(0!==e.length){var c=[];e.forEach((function(t){i.current[t.id]||c.push(t.id)})),h(!0),function(t){r.apply(this,arguments)}(c)}else g([]);else g(null)}),[e]),[m,y]}function C(t,n,r){var e=f(!1);a((function(){if(n){if(e.current){var i=[];n.forEach((function(n){n.distance<=t&&i.push(n.id)})),r(i)}e.current=!0}}),[t,n])}export{x as useCompanies,w as useCompanyMetricKey,E as useFilteredWells,F as useMetricsData,D as useOffsetWells,O as usePrevious,C as useRadiusWells,k as useWells,P as useWellsWithCoords};

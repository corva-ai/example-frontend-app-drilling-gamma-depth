import e from"@babel/runtime/helpers/defineProperty";import i from"@babel/runtime/helpers/slicedToArray";import{jsxs as o,jsx as t}from"react/jsx-runtime";import{makeStyles as n,ClickAwayListener as r,TextField as a,Tooltip as l,InputAdornment as c}from"@material-ui/core";import s from"@material-ui/icons/Close";import{useState as d,useEffect as p}from"react";import m from"prop-types";import u from"classnames";import f from"@material-ui/icons/Edit";import b from"@material-ui/icons/Done";var g=n((function(e){return{editableItem:{width:"100%",height:36,position:"relative",backgroundColor:e.palette.background.b8,"&:hover":{backgroundColor:"rgba(3, 188, 212, 0.07)"},"&:hover svg":{visibility:"visible"}},editableItemActive:{backgroundColor:"rgba(3, 188, 212, 0.15)  !important"},value:{color:e.palette.primary.text6,fontSize:"0.875rem",height:"100%",letterSpacing:".13132px",lineHeight:"36px",overflow:"hidden",paddingLeft:48,textOverflow:"ellipsis",whiteSpace:"nowrap",width:"calc(100% - 32px)",userSelect:"none"},textField:{width:"100%"},inputRoot:{height:36,paddingLeft:48,fontSize:"0.875rem"},inputDisabled:{backgroundColor:"unset",paddingRight:16,"&::before":{display:"none"},pointerEvents:"none"},icon:{boxSizing:"content-box",cursor:"pointer",color:e.palette.primary.text6,padding:7,fontSize:"1rem","&:hover":{color:"#FFFFFF",backgroundColor:"rgba(51, 51, 51, 0.9)",borderRadius:"50%"},"&:target":{backgroundColor:e.palette.background.b9}},iconPrimary:{color:e.palette.primary.main},iconPrimaryDisabled:{color:e.palette.primary.main,opacity:.4,cursor:"default",pointerEvents:"none"},iconClose:{fill:"".concat(e.palette.primary.text6," !important"),"&:hover":{fill:"#FFFFFF !important"}},iconEdit:{position:"absolute",right:4,top:3,visibility:"hidden"},inputAdornment:{marginTop:1,marginRight:4}}})),h=function(n){var m=n.className,h=n.isEditable,v=n.isEditing,y=n.onClick,C=n.onClickAway,k=n.onCancel,E=n.onSave,F=n.value,x=d(F),P=i(x,2),w=P[0],S=P[1],A=d(v),N=i(A,2),R=N[0],z=N[1],D=g(),I=function(e){e.stopPropagation(),w.length&&w!==F&&E(w).then((function(){return z(!1)}))};p((function(){var e=function(e){"Escape"===e.key||"Esc"===e.key?(S(F),z(!1),C()):"Enter"===e.key&&I(e)};return R&&document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[R,F,w]);var L=function(e){e.stopPropagation(),S(F),z(!1),k()};p((function(){S(F)}),[F]);var T=u(D.editableItem,e({},D.editableItemActive,R),m);return o("div",{className:T,onClick:y,children:[!R&&t("div",{className:D.value,children:w}),R&&t(r,{onClickAway:function(){S(F),z(!1),C()},children:t(a,{autoFocus:!0,type:"text",value:w,onChange:function(e){e.stopPropagation(),S(e.target.value)},placeholder:"Page Name...",className:D.textField,InputProps:{classes:{root:D.inputRoot},endAdornment:R?t(c,{position:"end",children:o("span",{className:D.inputAdornment,children:[t(l,{title:"Cancel",placement:"bottom-end",children:t(s,{className:u(D.icon,D.iconClose),onClick:L,fontSize:"small"})}),t(l,{title:"Save",placement:"bottom-end",children:t(b,{color:w===F?"disabled":"primary",onClick:I,fontSize:"small",disabled:w===F,classes:{root:D.icon,colorPrimary:D.iconPrimary,colorDisabled:D.iconPrimaryDisabled}})})]})}):null}})}),h&&!R&&t(l,{title:"Rename Page",placement:"bottom-end",children:t(f,{className:u(D.icon,D.iconEdit),onClick:function(e){e.stopPropagation(),z(!0)},fontSize:"small"})})]})};h.propTypes={className:m.string,isEditable:m.bool,isEditing:m.bool,onClick:m.func,onSave:m.func.isRequired,onClickAway:m.func,onCancel:m.func,value:m.string.isRequired},h.defaultProps={className:"",isEditable:!0,isEditing:!1,onClick:function(){},onClickAway:function(){},onCancel:function(){}};export default h;

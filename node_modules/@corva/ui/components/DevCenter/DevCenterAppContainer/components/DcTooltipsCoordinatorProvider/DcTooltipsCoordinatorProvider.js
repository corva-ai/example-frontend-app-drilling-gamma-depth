import n from"@babel/runtime/regenerator";import e from"@babel/runtime/helpers/asyncToGenerator";import{jsx as r}from"react/jsx-runtime";import{createContext as t,useRef as u,useMemo as c,useContext as o}from"react";import i from"prop-types";var s=t({setIsFullscreenModalMode:function(){}}),a="CLOSED",l="OPENNING",f="OPENED",p="CLOSING",m=function(t){var o=t.setIsFullscreenModalMode,i=t.children,m=u({name:a,currentElementInfo:null}),d=u(null),h=u(null),I=c((function(){function r(n){return t.apply(this,arguments)}function t(){return(t=e(n.mark((function e(r){var t,u;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=r.transitionFn,u=r.plannedAfterTransitionFinishCb,!d.current){n.next=4;break}return console.error("Cannot start another transition while current is not finished. This shouldn't have happened"),n.abrupt("return");case 4:return h.current=u,d.current=t(),n.next=8,d.current;case 8:d.current=null,h.current&&h.current();case 10:case"end":return n.stop()}}),e)})))).apply(this,arguments)}function u(n){m.current={name:f,currentElementInfo:n},m.current.currentElementInfo.setIsOpened(!0)}function c(n){m.current={name:l,currentElementInfo:null},r({transitionFn:function(){return o(!0)},plannedAfterTransitionFinishCb:function(){u(n)}})}function i(){m.current.currentElementInfo&&m.current.currentElementInfo.setIsOpened(!1),m.current={name:p,currentElementInfo:null},r({transitionFn:function(){return o(!1)},plannedAfterTransitionFinishCb:function(){m.current.name=a}})}return{requestOpen:function(n){switch(m.current.name){case a:c(n);break;case l:h.current=function(){return u(n)};break;case f:u(n);break;case p:h.current=function(){c(n)}}},requestClose:function(n){switch(n.setIsOpened(!1),m.current.name){case l:h.current=function(){return i()};break;case f:i()}}}}),[]);return r(s.Provider,{value:I,children:i})};function d(){return o(s)}m.propTypes={setIsFullscreenModalMode:i.func.isRequired,children:i.node.isRequired};export{m as DcTooltipsCoordinatorProvider,d as useDcTooltipsCoordinator};

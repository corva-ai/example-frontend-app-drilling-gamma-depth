import e from"@babel/runtime/helpers/defineProperty";import{get as t,capitalize as a}from"lodash";import s from"@babel/runtime/helpers/slicedToArray";import{jsxs as l,jsx as r}from"react/jsx-runtime";import{Button as o}from"@material-ui/core";import{useState as i}from"react";import n from"prop-types";import p from"./AssetEditors.css.js";import c from"./SingleAssetEditor.js";import u from"./AssetEditorAutocomplete.js";var d="DC_AppSettingsAssetEditor",m=function(n){var m=n.appKey,y=n.appType,A=n.defaultValue,f=n.isNullable,b=n.label,h=n.onSettingsChange,g=n.settings,C=t(y,["primaryAsset","assetType","type"]),T=t(y,["primaryAsset","assetType","id"]),v=t(y,["primaryAsset","autocompleteSelect"]),N=t(y,["secondaryAsset","assetType","type"]),V=t(y,["secondaryAsset","assetType","id"]),K=t(y,["secondaryAsset","autocompleteSelect"]),_=t(g,T),E=i(_||A),S=s(E,2),j=S[0],q=S[1],R=i(t(g,V)),k=s(R,2),x=k[0],B=k[1],D=i(!(!N||x)),I=s(D,2),P=I[0],U=I[1],W=i(!(!N||!x)),w=s(W,2),z=w[0],F=w[1],G=function(t){B(t),h(e({},V,t))},H=function(t){q(t),B(null),F(!1),U(!!N);var a=e({},T,t);V&&(a[V]=null),h(a)};return l("div",{className:p.main,children:[r("div",{className:p.title,children:"Active Asset"}),l("div",{className:p.editor,children:[v?r(u,{appKey:m,assetType:C,currentValue:j,"data-testid":"".concat(d,"_primaryAssetEditorAutocomplete"),defaultValue:A,disableClearable:!1,isNullable:f,label:b,onChange:H}):r(c,{appKey:m,assetType:C,currentValue:j,"data-testid":"".concat(d,"_primaryAutoComplete"),defaultValue:A,isNullable:f,label:b,onChange:H}),P&&r(o,{"data-testid":"".concat(d,"_changeWellButton"),color:"primary",onClick:function(){F(!0),U(!1)},disabled:!_,children:"Change ".concat(a(N))}),!P&&z&&r(o,{"data-testid":"".concat(d,"_useDefaultButton"),color:"secondary",onClick:function(){B(null),F(!1),U(!!N),h(e({},V,null))},children:"Use active asset"})]}),z&&r("div",{className:p.editor,children:K?r(u,{appKey:m,assetType:N,currentValue:x,"data-testid":"".concat(d,"_secondaryAssetEditorAutocomplete"),defaultValue:A,disableClearable:!1,isNullable:f,label:"Active ".concat(a(N)),onChange:G,parentAssetId:j,parentAssetType:C}):r(c,{"data-testid":"".concat(d,"_secondaryAutoComplete"),onChange:G,defaultValue:A,currentValue:x,isNullable:f,label:"Active ".concat(a(N)),assetType:N,parentAssetId:j,parentAssetType:C,appKey:m})})]})};m.defaultProps={label:"Choose An Asset",isNullable:!1,defaultValue:void 0,appKey:null},m.propTypes={settings:n.shape({}).isRequired,appType:n.shape({}).isRequired,defaultValue:n.any,onSettingsChange:n.func.isRequired,label:n.string,isNullable:n.bool,appKey:n.string};export default m;

import o from"@babel/runtime/helpers/slicedToArray";import n from"@babel/runtime/regenerator";import r from"@babel/runtime/helpers/asyncToGenerator";import{jsxs as t,jsx as e}from"react/jsx-runtime";import{styled as i,Grid as m,Button as a}from"@material-ui/core";import{memo as s,useState as p}from"react";import c from"prop-types";import"../../../../components/Login/components/Login.js";import l from"../../../../components/Login/components/PasswordField.js";import d from"../../../../components/Login/components/Chip.js";import u from"../../../../components/Login/components/StepFooter.js";import f from"../../../../components/Login/components/StepContent.js";import g from"../../../../components/Login/components/StepHeader.js";import h from"../../../../components/Login/components/Step.js";import v from"../../../../components/Login/components/OrDivider.js";import j from"../../../../components/Login/components/HiddenEmailField.js";import"../../../../components/Login/components/EmailField.js";import{useAuth as L}from"../../../context/auth.js";import{NEED_HELP_EXTERNAL_LINK as b}from"../../../constants/index.js";import y from"./SSOButton.js";var w=i(m)((function(o){var n=o.theme;return{marginTop:2*n.spacing(1),marginBottom:2*n.spacing(1),"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0}}})),S=i(a)((function(o){var n=o.theme;return{width:71,padding:n.spacing(),whiteSpace:"nowrap",backgroundColor:n.status.loginButton,"&:hover":{backgroundColor:"".concat(n.status.loginButtonHovered)}}}));function k(i){var a,s=i.email,c=i.schemas,k=i.onBack,B=i.onFinishLogin,C=L(),x=p(""),F=o(x,2),q=F[0],R=F[1],T=p(!1),H=o(T,2),I=H[0],E=H[1],O=I?C.error:null,A=(a=r(n.mark((function o(r){return n.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r.preventDefault(),E(!0),o.next=4,C.login({email:s,password:q},B);case 4:case"end":return o.stop()}}),o)}))),function(o){return a.apply(this,arguments)}),D=c.find((function(o){return"password"===o.provider})),P=c.filter((function(o){return"password"!==o.provider}));return t(h,{children:[e(g,{children:"Sign In"}),e(f,{children:t(m,{container:!0,direction:"column",children:[e(d,{"data-not-migrated-MuiChip":!0,label:s,onClick:k}),P.map((function(o){return e(w,{item:!0,children:e(y,{title:o.title,provider:o.provider,connection:o.connection,redirectURI:"qwerty",auth0:C.auth0})},o.title)})),D&&P.length>0&&e(m,{item:!0,children:e(v,{})}),D&&e(w,{item:!0,children:t("form",{id:"sign-in-form",onSubmit:A,children:[e(j,{email:s}),e(l,{value:q,onChange:function(o){R(o.target.value),E(!1)},disabled:C.loading,error:O})]})})]})}),e(u,{needHelpExternalLink:b,children:D&&e(S,{"data-testid":"".concat("AuthorizationPo","_signInButton"),form:"sign-in-form",type:"submit",variant:"contained",color:"primary",disabled:!q||C.loading||!!O,onClick:A,children:"Sign In"})})]})}k.propTypes={email:c.string.isRequired,schemas:c.arrayOf(c.shape({})).isRequired,onBack:c.func.isRequired,onFinishLogin:c.func.isRequired};var B=s(k);export default B;
